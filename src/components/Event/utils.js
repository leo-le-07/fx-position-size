// @flow

import axios from 'axios';
import moment from 'moment';
import type Moment from 'moment';
import { isEmpty } from 'lodash';

export type EventType = {
  title: string,
  country: string,
  date: Moment,
  impact: string,
  forecast: string,
  previous: string
};

export const getTodayEvents = async (): Promise<EventType[]> => {
  // const response = await axios.get('https://cdn-nfs.faireconomy.media/ff_calendar_thisweek.json', {
  // crossdomain: true,
  // });
  // if (isEmpty(response.data)) return [];

  const response = {
    data: [
      {
        title: 'AIG Manufacturing Index',
        country: 'AUD',
        date: '2019-01-06T16:30:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '51.3',
      },
      {
        title: 'Monetary Base y/y',
        country: 'JPY',
        date: '2019-01-06T18:50:00-05:00',
        impact: 'Low',
        forecast: '5.8%',
        previous: '6.1%',
      },
      {
        title: 'German Factory Orders m/m',
        country: 'EUR',
        date: '2019-01-07T02:00:00-05:00',
        impact: 'Low',
        forecast: '-0.2%',
        previous: '0.3%',
      },
      {
        title: 'German Retail Sales m/m',
        country: 'EUR',
        date: '2019-01-07T02:00:00-05:00',
        impact: 'Low',
        forecast: '0.4%',
        previous: '-0.3%',
      },
      {
        title: 'Sentix Investor Confidence',
        country: 'EUR',
        date: '2019-01-07T04:30:00-05:00',
        impact: 'Low',
        forecast: '-2.0',
        previous: '-0.3',
      },
      {
        title: 'Retail Sales m/m',
        country: 'EUR',
        date: '2019-01-07T05:00:00-05:00',
        impact: 'Low',
        forecast: '0.2%',
        previous: '0.3%',
      },
      {
        title: 'Ivey PMI',
        country: 'CAD',
        date: '2019-01-07T10:00:00-05:00',
        impact: 'Medium',
        forecast: '58.1',
        previous: '57.2',
      },
      {
        title: 'ISM Non-Manufacturing PMI',
        country: 'USD',
        date: '2019-01-07T10:00:00-05:00',
        impact: 'High',
        forecast: '59.6',
        previous: '60.7',
      },
      {
        title: 'ANZ Job Advertisements m/m',
        country: 'AUD',
        date: '2019-01-07T19:30:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '-0.3%',
      },
      {
        title: 'Trade Balance',
        country: 'AUD',
        date: '2019-01-07T19:30:00-05:00',
        impact: 'Medium',
        forecast: '2.18B',
        previous: '2.32B',
      },
      {
        title: '10-y Bond Auction',
        country: 'JPY',
        date: '2019-01-07T22:35:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '0.07|3.8',
      },
      {
        title: 'Consumer Confidence',
        country: 'JPY',
        date: '2019-01-08T00:07:00-05:00',
        impact: 'Low',
        forecast: '42.8',
        previous: '42.9',
      },
      {
        title: 'German Industrial Production m/m',
        country: 'EUR',
        date: '2019-01-08T02:00:00-05:00',
        impact: 'Low',
        forecast: '0.3%',
        previous: '-0.5%',
      },
      {
        title: 'Retail Sales y/y',
        country: 'CHF',
        date: '2019-01-08T02:30:00-05:00',
        impact: 'Low',
        forecast: '-0.7%',
        previous: '0.8%',
      },
      {
        title: 'French Trade Balance',
        country: 'EUR',
        date: '2019-01-08T02:45:00-05:00',
        impact: 'Low',
        forecast: '-4.9B',
        previous: '-4.1B',
      },
      {
        title: 'Halifax HPI m/m',
        country: 'GBP',
        date: '2019-01-08T03:30:00-05:00',
        impact: 'Low',
        forecast: '0.5%',
        previous: '-1.4%',
      },
      {
        title: 'NFIB Small Business Index',
        country: 'USD',
        date: '2019-01-08T05:20:00-05:00',
        impact: 'Low',
        forecast: '103.1',
        previous: '104.8',
      },
      {
        title: '10-y Bond Auction',
        country: 'GBP',
        date: '2019-01-08T05:37:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '1.49|2.0',
      },
      {
        title: 'Trade Balance',
        country: 'CAD',
        date: '2019-01-08T08:30:00-05:00',
        impact: 'High',
        forecast: '-2.1B',
        previous: '-1.2B',
      },
      {
        title: 'JOLTS Job Openings',
        country: 'USD',
        date: '2019-01-08T10:00:00-05:00',
        impact: 'Low',
        forecast: '7.07M',
        previous: '7.08M',
      },
      {
        title: 'Consumer Credit m/m',
        country: 'USD',
        date: '2019-01-08T15:00:00-05:00',
        impact: 'Low',
        forecast: '17.3B',
        previous: '25.4B',
      },
      {
        title: 'AIG Services Index',
        country: 'AUD',
        date: '2019-01-08T16:30:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '55.1',
      },
      {
        title: 'ANZ Commodity Prices m/m',
        country: 'NZD',
        date: '2019-01-08T19:00:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '-0.6%',
      },
      {
        title: 'Average Cash Earnings y/y',
        country: 'JPY',
        date: '2019-01-08T19:00:00-05:00',
        impact: 'Medium',
        forecast: '1.3%',
        previous: '1.5%',
      },
      {
        title: 'Building Approvals m/m',
        country: 'AUD',
        date: '2019-01-08T19:30:00-05:00',
        impact: 'Medium',
        forecast: '-0.3%',
        previous: '-1.5%',
      },
      {
        title: 'President Trump Speaks',
        country: 'USD',
        date: '2019-01-08T21:00:00-05:00',
        impact: 'High',
        forecast: '',
        previous: '',
      },
      {
        title: 'German Trade Balance',
        country: 'EUR',
        date: '2019-01-09T02:00:00-05:00',
        impact: 'Low',
        forecast: '17.6B',
        previous: '17.3B',
      },
      {
        title: 'CPI m/m',
        country: 'CHF',
        date: '2019-01-09T02:30:00-05:00',
        impact: 'Low',
        forecast: '-0.2%',
        previous: '-0.3%',
      },
      {
        title: 'Foreign Currency Reserves',
        country: 'CHF',
        date: '2019-01-09T03:00:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '749B',
      },
      {
        title: 'Italian Monthly Unemployment Rate',
        country: 'EUR',
        date: '2019-01-09T04:00:00-05:00',
        impact: 'Low',
        forecast: '10.5%',
        previous: '10.6%',
      },
      {
        title: 'Unemployment Rate',
        country: 'EUR',
        date: '2019-01-09T05:00:00-05:00',
        impact: 'Low',
        forecast: '8.1%',
        previous: '8.1%',
      },
      {
        title: 'German 10-y Bond Auction',
        country: 'EUR',
        date: '2019-01-09T05:42:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '0.34|1.6',
      },
      {
        title: 'Housing Starts',
        country: 'CAD',
        date: '2019-01-09T08:15:00-05:00',
        impact: 'Low',
        forecast: '210K',
        previous: '216K',
      },
      {
        title: 'FOMC Member Evans Speaks',
        country: 'USD',
        date: '2019-01-09T09:00:00-05:00',
        impact: 'Medium',
        forecast: '',
        previous: '',
      },
      {
        title: 'Overnight Rate',
        country: 'CAD',
        date: '2019-01-09T10:00:00-05:00',
        impact: 'High',
        forecast: '2.00%',
        previous: '1.75%',
      },
      {
        title: 'BOC Monetary Policy Report',
        country: 'CAD',
        date: '2019-01-09T10:00:00-05:00',
        impact: 'High',
        forecast: '',
        previous: '',
      },
      {
        title: 'BOC Rate Statement',
        country: 'CAD',
        date: '2019-01-09T10:00:00-05:00',
        impact: 'High',
        forecast: '',
        previous: '',
      },
      {
        title: 'BOC Press Conference',
        country: 'CAD',
        date: '2019-01-09T10:15:00-05:00',
        impact: 'High',
        forecast: '',
        previous: '',
      },
      {
        title: 'Crude Oil Inventories',
        country: 'USD',
        date: '2019-01-09T10:30:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '0.0M',
      },
      {
        title: 'BOE Gov Carney Speaks',
        country: 'GBP',
        date: '2019-01-09T10:30:00-05:00',
        impact: 'High',
        forecast: '',
        previous: '',
      },
      {
        title: 'FOMC Member Rosengren Speaks',
        country: 'USD',
        date: '2019-01-09T11:30:00-05:00',
        impact: 'Medium',
        forecast: '',
        previous: '',
      },
      {
        title: '10-y Bond Auction',
        country: 'USD',
        date: '2019-01-09T13:01:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '2.92|2.4',
      },
      {
        title: 'FOMC Meeting Minutes',
        country: 'USD',
        date: '2019-01-09T14:00:00-05:00',
        impact: 'High',
        forecast: '',
        previous: '',
      },
      {
        title: 'BRC Retail Sales Monitor y/y',
        country: 'GBP',
        date: '2019-01-09T19:01:00-05:00',
        impact: 'Low',
        forecast: '-0.3%',
        previous: '-0.5%',
      },
      {
        title: 'CPI y/y',
        country: 'CNY',
        date: '2019-01-09T20:30:00-05:00',
        impact: 'Low',
        forecast: '2.1%',
        previous: '2.2%',
      },
      {
        title: 'PPI y/y',
        country: 'CNY',
        date: '2019-01-09T20:30:00-05:00',
        impact: 'Low',
        forecast: '1.6%',
        previous: '2.7%',
      },
      {
        title: '30-y Bond Auction',
        country: 'JPY',
        date: '2019-01-09T22:35:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '0.79|3.8',
      },
      {
        title: 'Leading Indicators',
        country: 'JPY',
        date: '2019-01-10T00:00:00-05:00',
        impact: 'Low',
        forecast: '99.5%',
        previous: '100.5%',
      },
      {
        title: 'Unemployment Rate',
        country: 'CHF',
        date: '2019-01-10T02:15:00-05:00',
        impact: 'Low',
        forecast: '2.4%',
        previous: '2.4%',
      },
      {
        title: 'French Industrial Production m/m',
        country: 'EUR',
        date: '2019-01-10T02:45:00-05:00',
        impact: 'Low',
        forecast: '0.1%',
        previous: '1.2%',
      },
      {
        title: 'Italian Retail Sales m/m',
        country: 'EUR',
        date: '2019-01-10T04:00:00-05:00',
        impact: 'Low',
        forecast: '0.2%',
        previous: '0.1%',
      },
      {
        title: 'M2 Money Supply y/y',
        country: 'CNY',
        date: '2019-01-10T04:01:00-05:00',
        impact: 'Low',
        forecast: '8.1%',
        previous: '8.0%',
      },
      {
        title: 'New Loans',
        country: 'CNY',
        date: '2019-01-10T04:01:00-05:00',
        impact: 'Low',
        forecast: '825B',
        previous: '1250B',
      },
      {
        title: 'French 10-y Bond Auction',
        country: 'EUR',
        date: '2019-01-10T05:18:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '0.82|1.8',
      },
      {
        title: 'ECB Monetary Policy Meeting Accounts',
        country: 'EUR',
        date: '2019-01-10T07:30:00-05:00',
        impact: 'Medium',
        forecast: '',
        previous: '',
      },
      {
        title: 'Unemployment Claims',
        country: 'USD',
        date: '2019-01-10T08:30:00-05:00',
        impact: 'Low',
        forecast: '226K',
        previous: '231K',
      },
      {
        title: 'Building Permits m/m',
        country: 'CAD',
        date: '2019-01-10T08:30:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '-0.2%',
      },
      {
        title: 'NHPI m/m',
        country: 'CAD',
        date: '2019-01-10T08:30:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '0.0%',
      },
      {
        title: 'Natural Gas Storage',
        country: 'USD',
        date: '2019-01-10T10:30:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '-20B',
      },
      {
        title: 'Fed Chair Powell Speaks',
        country: 'USD',
        date: '2019-01-10T12:00:00-05:00',
        impact: 'High',
        forecast: '',
        previous: '',
      },
      {
        title: 'FOMC Member Bullard Speaks',
        country: 'USD',
        date: '2019-01-10T12:40:00-05:00',
        impact: 'Medium',
        forecast: '',
        previous: '',
      },
      {
        title: 'FOMC Member Evans Speaks',
        country: 'USD',
        date: '2019-01-10T13:00:00-05:00',
        impact: 'Medium',
        forecast: '',
        previous: '',
      },
      {
        title: '30-y Bond Auction',
        country: 'USD',
        date: '2019-01-10T13:01:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '3.17|2.3',
      },
      {
        title: 'AIG Construction Index',
        country: 'AUD',
        date: '2019-01-10T16:30:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '44.5',
      },
      {
        title: 'Building Consents m/m',
        country: 'NZD',
        date: '2019-01-10T16:45:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '1.5%',
      },
      {
        title: 'FOMC Member Clarida Speaks',
        country: 'USD',
        date: '2019-01-10T17:30:00-05:00',
        impact: 'Medium',
        forecast: '',
        previous: '',
      },
      {
        title: 'Household Spending y/y',
        country: 'JPY',
        date: '2019-01-10T18:30:00-05:00',
        impact: 'Low',
        forecast: '0.2%',
        previous: '-0.3%',
      },
      {
        title: 'Bank Lending y/y',
        country: 'JPY',
        date: '2019-01-10T18:50:00-05:00',
        impact: 'Low',
        forecast: '2.1%',
        previous: '2.1%',
      },
      {
        title: 'Current Account',
        country: 'JPY',
        date: '2019-01-10T18:50:00-05:00',
        impact: 'Low',
        forecast: '1.10T',
        previous: '1.21T',
      },
      {
        title: 'Retail Sales m/m',
        country: 'AUD',
        date: '2019-01-10T19:30:00-05:00',
        impact: 'High',
        forecast: '0.3%',
        previous: '0.3%',
      },
      {
        title: 'Economy Watchers Sentiment',
        country: 'JPY',
        date: '2019-01-11T00:00:00-05:00',
        impact: 'Low',
        forecast: '50.3',
        previous: '51.0',
      },
      {
        title: 'Italian Industrial Production m/m',
        country: 'EUR',
        date: '2019-01-11T04:00:00-05:00',
        impact: 'Low',
        forecast: '-0.3%',
        previous: '0.1%',
      },
      {
        title: 'Goods Trade Balance',
        country: 'GBP',
        date: '2019-01-11T04:30:00-05:00',
        impact: 'Low',
        forecast: '-11.4B',
        previous: '-11.9B',
      },
      {
        title: 'GDP m/m',
        country: 'GBP',
        date: '2019-01-11T04:30:00-05:00',
        impact: 'High',
        forecast: '0.1%',
        previous: '0.1%',
      },
      {
        title: 'Index of Services 3m/3m',
        country: 'GBP',
        date: '2019-01-11T04:30:00-05:00',
        impact: 'Low',
        forecast: '0.2%',
        previous: '0.3%',
      },
      {
        title: 'Construction Output m/m',
        country: 'GBP',
        date: '2019-01-11T04:30:00-05:00',
        impact: 'Low',
        forecast: '0.2%',
        previous: '-0.2%',
      },
      {
        title: 'Manufacturing Production m/m',
        country: 'GBP',
        date: '2019-01-11T04:30:00-05:00',
        impact: 'High',
        forecast: '0.4%',
        previous: '-0.9%',
      },
      {
        title: 'Industrial Production m/m',
        country: 'GBP',
        date: '2019-01-11T04:30:00-05:00',
        impact: 'Low',
        forecast: '0.3%',
        previous: '-0.6%',
      },
      {
        title: 'NIESR GDP Estimate',
        country: 'GBP',
        date: '2019-01-11T08:03:00-05:00',
        impact: 'Low',
        forecast: '',
        previous: '0.3%',
      },
      {
        title: 'CPI m/m',
        country: 'USD',
        date: '2019-01-11T08:30:00-05:00',
        impact: 'High',
        forecast: '-0.1%',
        previous: '0.0%',
      },
      {
        title: 'Core CPI m/m',
        country: 'USD',
        date: '2019-01-11T08:30:00-05:00',
        impact: 'High',
        forecast: '0.2%',
        previous: '0.2%',
      },
      {
        title: 'Federal Budget Balance',
        country: 'USD',
        date: '2019-01-11T14:00:00-05:00',
        impact: 'Low',
        forecast: '0.0B',
        previous: '-204.9B',
      },
    ],
  };

  return (
    response.data
      .map(res => ({
        ...res,
        date: moment(res.date, 'YYYY-MM-DDTHH:mm:ssZ'),
      }))
      // $FlowFixMe
      .filter(res => res.date.isSame(moment(), 'day'))
  );
};
